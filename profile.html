<!DOCTYPE html>
<html>
<head>
<title>My Profile</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
font-family:Arial;
background:#020617;
color:white;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

.box{
background:#0f172a;
padding:30px;
border-radius:18px;
width:320px;
text-align:center;
}

img{
width:110px;
height:110px;
border-radius:50%;
object-fit:cover;
border:3px solid #22c55e;
}

input{
margin-top:10px;
}

button{
margin-top:15px;
padding:12px;
width:100%;
background:linear-gradient(45deg,#6366f1,#06b6d4);
border:none;
border-radius:10px;
color:white;
}
</style>
</head>

<body>

<div class="box">

<h2>üë§ My Profile</h2>

<img id="photo" src="https://via.placeholder.com/110">

<input type="file" onchange="uploadPhoto(event)">

<input id="nameInput" placeholder="Enter your name"
style="padding:10px;width:100%;border-radius:8px;border:none;margin-top:12px">

<button onclick="saveName()">Save Name</button>

<h3 id="name" style="margin-top:10px"></h3>
<p id="xp"></p>
<p id="streak"></p>

<div id="paymentStatus" style="
margin-top:15px;
padding:12px;
border-radius:12px;
background:#111827;
font-weight:bold">
Checking payment...
</div>

<button onclick="window.location='index.html'">Home</button>

</div>

<script>

let student = localStorage.getItem("studentName") || "Student";
document.getElementById("name").innerHTML=student;
document.getElementById("nameInput").value=student;

// xp
let xpData = JSON.parse(localStorage.getItem("xpData")) || {};
let xp = xpData[student] || 0;
document.getElementById("xp").innerHTML="‚≠ê XP: "+xp;

// streak
let streakData = JSON.parse(localStorage.getItem("streakData")) || {};
let streak = streakData[student] ? streakData[student].streak : 0;
document.getElementById("streak").innerHTML="üî• Streak: "+streak+" days";

// photo load
let photo = localStorage.getItem("photo_"+student);
if(photo){
document.getElementById("photo").src=photo;
}

function uploadPhoto(e){
let file = e.target.files[0];
let reader = new FileReader();
reader.onload=function(){
localStorage.setItem("photo_"+student,reader.result);
document.getElementById("photo").src=reader.result;
}
reader.readAsDataURL(file);
}



function saveName(){
let newName = document.getElementById("nameInput").value;

if(!newName){
alert("Enter name");
return;
}

localStorage.setItem("studentName", newName);
document.getElementById("name").innerHTML=newName;

alert("Name saved!");
location.reload();
}








import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

let studentName = localStorage.getItem("studentName");

async function checkPayment(){
if(!studentName) return;

let snap = await getDoc(doc(db,"payments",studentName));

if(!snap.exists()){
document.getElementById("paymentStatus").innerHTML="Status: Not found";
return;
}

let data=snap.data();
let status=data.status;

let color="#22c55e";

if(status=="OVERDUE") color="red";
if(status=="COMPLETED") color="#38bdf8";

document.getElementById("paymentStatus").innerHTML=
`Payment Status: <span style="color:${color}">${status}</span>`;
}

checkPayment();

</script>

</body>
</html>

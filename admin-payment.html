<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Payment Admin</title>

<style>
body{
background:#020617;
color:white;
font-family:Arial;
text-align:center;
padding:20px;
}

.card{
background:#0f172a;
padding:20px;
border-radius:16px;
max-width:500px;
margin:auto;
margin-top:20px;
}

input{
width:90%;
padding:12px;
margin:8px;
border:none;
border-radius:10px;
font-size:16px;
}

button{
width:92%;
padding:14px;
margin-top:10px;
border:none;
border-radius:12px;
font-size:16px;
font-weight:bold;
background:linear-gradient(90deg,#6366f1,#06b6d4);
color:white;
}

.student{
background:#111827;
padding:14px;
margin:10px;
border-radius:12px;
}

.del{
background:red;
margin-top:8px;
}
</style>
</head>
<body>

<div class="card">
<h2>âž• Add Student</h2>

<input id="name" placeholder="Student name">
<input type="month" id="join">
<button onclick="addStudent()">Add Student</button>
</div>

<div class="card">
<h2>ðŸ“Š Students</h2>
<div id="list"></div>
</div>

<div class="card">
<h2>ðŸ’° Total Monthly Income</h2>
<h1 id="total">0</h1>
</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig={
apiKey:"AIzaSyCEYfwfZv2Ckpg-uFLRvJkMBRlXA2w_WpI",
authDomain:"black-terminal-f2c91.firebaseapp.com",
projectId:"black-terminal-f2c91",
storageBucket:"black-terminal-f2c91.appspot.com",
messagingSenderId:"552489994197",
appId:"1:552489994197:web:7662331264c334ffbadf5c"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

/* ADD STUDENT */
window.addStudent=async function(){

let name=document.getElementById("name").value.trim();
let join=document.getElementById("join").value;

if(!name||!join){
alert("Fill all");return;
}

await addDoc(collection(db,"students_pay"),{
name:name,
join:join,
monthly:500
});

alert("Added âœ…");
document.getElementById("name").value="";
load();
}

/* DELETE */
window.del=async function(id){
await deleteDoc(doc(db,"students_pay",id));
load();
}

/* LOAD */
async function load(){

let snap=await getDocs(collection(db,"students_pay"));
let html="";
let total=0;

snap.forEach(d=>{

let s=d.data();
total+=500;

html+=`
<div class="student">
<b>${s.name}</b><br>
Monthly Fee: â‚¹500<br>
<button class="del" onclick="del('${d.id}')">Delete</button>
</div>`;
});

document.getElementById("list").innerHTML=html;
document.getElementById("total").innerHTML="â‚¹"+total;
}

load();

</script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
<title>Live Leaderboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
margin:0;
font-family:Poppins,Arial;
background:radial-gradient(circle,#020617,#000);
color:white;
text-align:center;
}

.box{
width:92%;
max-width:700px;
margin:40px auto;
background:#0f172a;
padding:20px;
border-radius:18px;
}

h1{
margin-bottom:20px;
}

.row{
display:flex;
align-items:center;
justify-content:space-between;
background:#020617;
padding:12px;
margin:12px 0;
border-radius:14px;
animation:fade .6s ease;
}

@keyframes fade{
from{opacity:0;transform:translateY(20px)}
to{opacity:1;transform:translateY(0)}
}

.left{
display:flex;
align-items:center;
gap:12px;
}

.left img{
width:50px;
height:50px;
border-radius:50%;
border:2px solid #22c55e;
}

.rank{
font-size:22px;
width:40px;
}

.name{
font-size:16px;
}

.streak{
font-size:12px;
color:#22c55e;
}

.xp{
font-size:18px;
color:gold;
}

/* home btn */
.home{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
padding:14px 35px;
background:linear-gradient(45deg,#6366f1,#06b6d4);
border:none;
border-radius:12px;
color:white;
font-size:16px;
}
</style>
</head>

<body>

<div class="box">
<h1>ğŸ† Live Leaderboard</h1>
<div id="list"></div>
</div>

<button class="home" onclick="window.location='index.html'">ğŸ  Home</button>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
apiKey:"AIzaSyCEYfwfZv2Ckpg-uFLRvJkMBRlXA2w_WpI",
authDomain:"black-terminal-f2c91.firebaseapp.com",
projectId:"black-terminal-f2c91",
storageBucket:"black-terminal-f2c91.firebasestorage.app",
messagingSenderId:"552489994197",
appId:"1:552489994197:web:7662331264c334ffbadf5c"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

async function load(){
let snap = await getDocs(collection(db,"students"));
let arr=[];
snap.forEach(doc=>arr.push(doc.data()));

// sort by xp
arr.sort((a,b)=>b.xp-a.xp);

let html="";
arr.forEach((x,i)=>{

let medal="ğŸ…";
if(i==0) medal="ğŸ¥‡";
if(i==1) medal="ğŸ¥ˆ";
if(i==2) medal="ğŸ¥‰";

html+=`
<div class="row">
<div class="left">
<div class="rank">${medal}</div>
<img src="${x.photo || 'https://i.ibb.co/4pDNDk1/avatar.png'}">
<div>
<div class="name">${x.name}</div>
<div class="streak">ğŸ”¥ ${x.streak || 0} days</div>
</div>
</div>
<div class="xp">â­ ${x.xp}</div>
</div>
`;
});

document.getElementById("list").innerHTML=html;
}

load();

// auto refresh every 5 sec
setInterval(load,5000);

</script>

</body>
</html>